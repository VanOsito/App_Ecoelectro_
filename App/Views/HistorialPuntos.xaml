<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="App.Views.HistorialPuntos"
             BackgroundColor="#F3EDF7"
             Title="">

    <ScrollView>
        <VerticalStackLayout Padding="25" Spacing="20">

            <!-- ðŸ† Encabezado -->
            <Frame BackgroundColor="#7F4A9B"
                   CornerRadius="25"
                   Padding="20"
                   HasShadow="True">
                <VerticalStackLayout HorizontalOptions="Center" Spacing="10">
                    <Label Text="Historial de Puntos"
                           FontSize="24"
                           FontAttributes="Bold"
                           TextColor="White"
                           HorizontalOptions="Center" />
                    <Label x:Name="TotalLabel"
                           Text="Total: 0 pts"
                           FontSize="20"
                           FontAttributes="Bold"
                           TextColor="#E1BEE7"
                           HorizontalOptions="Center" />
                </VerticalStackLayout>
            </Frame>

            <!-- ðŸ“‹ Lista del historial -->
            <CollectionView x:Name="HistorialList"
                            SelectionMode="None"
                            VerticalOptions="FillAndExpand">
                <CollectionView.EmptyView>
                    <Label Text="AÃºn no tienes movimientos de puntos."
                           FontSize="16"
                           TextColor="#777"
                           HorizontalOptions="Center"
                           VerticalOptions="Center"
                           Margin="0,40,0,0" />
                </CollectionView.EmptyView>

                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Margin="0,8"
                               Padding="15"
                               CornerRadius="18"
                               HasShadow="True"
                               BackgroundColor="White">

                            <Grid ColumnDefinitions="*,Auto"
                                  RowDefinitions="Auto,Auto,Auto"
                                  RowSpacing="3">

                                <!-- DescripciÃ³n -->
                                <Label Grid.ColumnSpan="2"
                                       Text="{Binding Descripcion}"
                                       FontAttributes="Bold"
                                       FontSize="16"
                                       TextColor="#4A148C" />

                                <!-- Tipo -->
                                <Label Grid.Row="1"
                                       Text="{Binding Tipo}"
                                       FontSize="13"
                                       TextColor="#757575" />

                                <!-- Fecha -->
                                <Label Grid.Row="2"
                                       Text="{Binding Fecha, StringFormat='{0:dd/MM/yyyy HH:mm}'}"
                                       FontSize="12"
                                       TextColor="#9E9E9E" />

                                <!-- Cantidad -->
                                <Frame Grid.RowSpan="3"
                                       Grid.Column="1"
                                       BackgroundColor="#EDE7F6"
                                       CornerRadius="12"
                                       Padding="10,5"
                                       VerticalOptions="Center"
                                       HorizontalOptions="End">
                                    <Label Text="{Binding Cantidad, StringFormat='+{0} pts'}"
                                           FontSize="14"
                                           FontAttributes="Bold"
                                           TextColor="#6A1B9A"
                                           HorizontalOptions="Center" />
                                </Frame>

                            </Grid>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
